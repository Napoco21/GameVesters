<% if current_user.can_add_stock?(@stock.symbol) %>
<%= link_to "Add to my Stocks", user_stocks_path(user: current_user, stock_symbol: @stock.symbol, stock_id: @stock.id ? @stock.id : ''), class: 'btn btn-xs btn-success', method: :post %>

<!--<%= link_to "Buy", new_user_transaction_path(user: current_user, user_id: current_user.id, stock_symbol: @stock.symbol, stock_id: @stock.id ? @stock.id : '', stock_price: @stock.current_price), remote: true, class: "btn btn-xs btn-primary" %>-->

<% else %>

<span class="label label-default">
  Stock cannot be added because you ahve already added
  <% if !current_user.under_stock_limit? %>
  10 stocks
  <% end %>
  <% if current_user.stock_already_added?(@stock.symbol) %>
  this stock
  <% end %>
</span>
<% end %>

<%= button_tag 'Buy', "data-target" => "#transaction-modal", "data-toggle" => "modal", class: "btn btn-xs btn-primary", data: {user: current_user, user_id: current_user.id, stock_symbol: @stock.symbol, stock_id: @stock.id ? @stock.id : '', stock_price: @stock.current_price} %>